## 💡 **프로세스 표현 가이드**

- 프로세스를 가장 잘 설명할 수 있는 방식을 사용하여 작성합니다. (Flowchart, BPMN, Sequence Diagram, Use Case 등)
- 다이어그램만으로 설명이 부족할 경우, 각 단계의 세부 내용이나 비즈니스 규칙을 보충 설명합니다.

---

### **프로세스 개요**

| 항목 | 설명 |
| :--- | :--- |
| **목적** | 발급된 인증서의 신뢰성을 유지하기 위해 특정 인증서의 유효성을 영구적으로 중단하고, 해당 정보를 폐기 목록(CRL)을 통해 주기적으로 외부에 공지하여 안전한 PKI 운영을 보장합니다. |
| **시작 조건** | 폐기 대상 인증서가 발급되어 유효 상태여야 합니다. 인증서 관리자가 폐기를 요청하거나, CRL 생성 주기에 도달해야 합니다. |
| **종료 조건** | 폐기 요청된 인증서가 시스템 내에서 '폐기됨'으로 처리되고, 해당 정보가 CRL에 반영되어 배포되며, 외부 시스템이 이를 통해 인증서 유효성을 확인할 수 있습니다. |

---

### **프로세스 표현 (Flowchart)**

```mermaid
graph TD
    subgraph 인증서 폐기 및 CRL 관리 프로세스
        A[인증서 관리자] --> B(폐기할 인증서 정보 조회);
        B -- R22 --> C{인증서 폐기 요청};
        C --> D(폐기된 인증서 정보 저장);
        D -- R23 --> E(CRL 파일 생성);
        E -- R20 --> F(CRL 배포);
        F -- R21 --> G[외부 연계 시스템];
        F --> H[DIRECTOR Admin (배포 인지)];

        G -- A10 --> I{OCSP를 통한 인증서 유효성 확인};
        G --> J{CRL 다운로드를 통한 인증서 유효성 확인};

        K[계정 관리자] -- A8 --> L(CRL 업데이트 식별 변경 요청);
        L -- R41 --> M{처리 스트림 결정};
    end
```

---

### **상세 절차**

| 단계 | 수행자 | 행동 (Action) | 상세 설명 |
| :--- | :--- | :--- | :--- |
| 1 | 인증서 관리자 (A7) | 폐기할 인증서 정보 조회 | 시스템에서 폐기 대상 인증서를 검색하고 세부 정보를 확인합니다 (R22). |
| 2 | 인증서 관리자 (A7) | 인증서 폐기 요청 | 조회된 인증서에 대해 폐기를 요청합니다. 이때 **폐기 방식 (H19)** (예: 보류(Hold), 영구 폐기(Revoked) 등)을 선택하며, **폐기 처리 로직에서 TimeZone/Date/Time 고려 (H11)** 사항이 반영됩니다. (CRS-010) |
| 3 | 시스템 | 폐기된 인증서 정보 저장 | 요청에 따라 시스템은 인증서 상태를 '폐기됨'으로 변경하고, 폐기 사유, 폐기일 등 관련 정보를 데이터베이스에 저장합니다 (R23). |
| 4 | 시스템 | CRL 파일 생성 | 시스템은 정해진 주기에 따라 또는 새로운 인증서 폐기 이벤트 발생 시, 현재까지 폐기된 모든 인증서 정보를 포함하는 새로운 CRL(Certificate Revocation List) 파일을 생성합니다 (R20). |
| 5 | 시스템 | CRL 배포 | 생성된 CRL 파일은 **정해진 규칙/시간/정책에 따라 자동화(O5)**되어 CRL 배포 지점(예: HTTP 서버, LDAP 디렉토리)에 게시됩니다 (R21). **DIRECTOR Admin (A9)**은 이 배포 과정을 인지합니다. (CRS-014) |
| 6 | 외부 연계 시스템 (A10) | OCSP를 통한 인증서 유효성 확인 | 외부 시스템은 OCSP(Online Certificate Status Protocol)를 통해 특정 인증서의 실시간 유효성 상태를 조회합니다 (R31). 이때 **OCSP 응답 속도/가용성 (H12)** 요구사항이 중요하게 고려됩니다. (CRS-006) |
| 7 | 외부 연계 시스템 (A10) | CRL 다운로드를 통한 인증서 유효성 확인 | 외부 시스템은 CRL 배포 지점에서 최신 CRL 파일을 다운로드하여 인증서 유효성을 검증합니다 (R29, H13). 이때 **모든 CA의 CRL 다운로드 시 성능 문제(H13)**가 없어야 하며, **모든 CA CRL 다운로드를 지원(O9)**해야 합니다. (CRS-007) |
| 8 | 계정 관리자 (A8) | CRL 업데이트 식별 변경 요청 | 필요에 따라 계정 관리자는 특정 CA의 CRL 업데이트 식별자 변경을 요청할 수 있습니다 (R41). **이 요청이 어떤 스트림(H22)**을 타는지에 대한 명확한 정의가 필요합니다. |
