## 💡 **프로세스 표현 가이드**

- 프로세스를 가장 잘 설명할 수 있는 방식을 사용하여 작성합니다. (Flowchart, BPMN, Sequence Diagram, Use Case 등)
- 다이어그램만으로 설명이 부족할 경우, 각 단계의 세부 내용이나 비즈니스 규칙을 보충 설명합니다.

---

### **프로세스 개요**

| 항목 | 설명 |
| :--- | :--- |
| **목적** | PKI 관리 시스템의 기능적/비기능적 요구사항(성능, 안정성, 보안 등)을 검증하고, 각 모듈 및 외부 시스템과의 통합을 확인하여 고품질의 제품을 제공하는 것입니다. 특히, 고가용성(HA) 및 재해 복구(DR) 시나리오에 대한 테스트를 포함합니다. |
| **시작 조건** | PKI 관리 시스템의 주요 기능 개발이 완료되고, 개별 모듈 테스트가 일정 수준 통과한 시점. |
| **종료 조건** | 모든 테스트 케이스가 수행되고, 발견된 주요 결함이 수정되어 MVP 기능 테스트(R3) 및 성능 요구사항 만족(R4)이 확인된 시점. 통합 테스트 모듈(O1)의 효과가 검증됨. |

---

### **프로세스 표현 (Flowchart)**

```mermaid
graph TD
    subgraph "QA 및 통합 테스트"
        start((Start)) --> define_scope[테스트 범위 및 계획 수립]

        define_scope --> A2_mvp(A2: MVP 기능 테스트 수행)
        A2_mvp --> R3{R3: MVP 기능 테스트에 통과함?}
        R3 -- No --> defect_fix_mvp[결함 발견 및 수정 요청 (엔지니어)]
        defect_fix_mvp --> A2_mvp
        R3 -- Yes --> O1_activate(O1: 기능 통합 테스트 모듈 활용/구현)

        define_scope --> A2_perf(A2: 성능/부하 테스트 수행)
        A2_perf --> R4{R4: 성능 요구사항 만족 및 부하 테스트 통과?}
        R4 -- No --> defect_fix_perf[결함 발견 및 수정 요청 (엔지니어)]
        defect_fix_perf --> A2_perf
        R4 -- Yes --> H3[H3: Observability 구축 필요 확인]

        O1_activate --> A2_integration(A2: 기능 통합 테스트 수행)

        subgraph "고가용성 및 재해 복구(DR) 테스트"
            A2_integration --> check_ha_setting[DB/HSM 이중화 설정 확인 (R7, R8)]
            check_ha_setting --> H5[H5: MariaDB 데이터 동기화 테스트]
            check_ha_setting --> H6[H6: HSM 데이터 동기화 테스트]
            H5 & H6 --> A2_dr_rehearsal(A2: DR 리허설 테스트 수행)
            A2_dr_rehearsal --> H4[H4: DR 리허설 테스트 결과 확인]
            A2_dr_rehearsal --> H18[H18: 복구 후 기능 테스트 절차 정의/수행]
            H4 & H18 --> H14[H14: 특정 노드 장애 시 유효성 확인]
        end

        H3 & H14 --> reporting[테스트 결과 보고 및 승인]
        reporting --> end((End))
    end
```

---

### **상세 절차**

| 단계 | 수행자 | 행동 (Action) | 상세 설명 |
| :--- | :--- | :--- | :--- |
| 1 | QA (`A2`), 정책 관리자 (`A1`) | **테스트 계획 수립 및 범위 정의** | 제품/서비스의 기능적, 비기능적 요구사항(CRS-001, CRS-002, CRS-006, CRS-007 등)을 기반으로 테스트 계획 및 전략 수립. MVP 기능, 성능/부하, 통합, 이중화/DR 테스트 범위를 정의합니다. 특히, `H2` (고객이 원하는 인증서 발급 정책)를 명확히 이해하고 테스트 케이스에 반영합니다. CP/CPS (`R1`) 및 주요 인증서 발급 정책 (`R2`, `P3`)을 참조하여 테스트 목표와 기준을 설정합니다. |
| 2 | QA (`A2`) | **MVP 기능 테스트 수행** | 핵심 기능(Minimum Viable Product)에 대한 기능 테스트를 수행하여 시스템의 기본적인 동작을 검증합니다. `R3` (MVP 기능 테스트에 통과함)을 목표로, 인증서 발급, 폐기, 정책 설정 등 주요 사용자 시나리오를 검증합니다. `O1` (기능 통합 테스트 모듈)의 필요성을 확인하고, 가능하다면 모듈을 활용하거나 구현하여 테스트 효율성을 높입니다 (CRS-012). |
| 3 | QA (`A2`) | **성능 및 부하 테스트 수행** | 시스템의 성능 요구사항 (`R4`)을 만족하는지 확인하고, 예상되는 부하 조건에서 안정적으로 동작하는지 검증합니다. 특히 OCSP 응답 속도/가용성 (`H12`, CRS-006) 및 모든 CA CRL 다운로드 시 성능 (`H13`, CRS-007)과 같은 외부 연동 부분에 대한 성능 저하 여부를 중점적으로 확인합니다. `H3` (Observability 구축 필요)를 통해 성능 모니터링의 중요성을 인지하고 테스트에 반영합니다 (CRS-002). |
| 4 | QA (`A2`) | **기능 통합 테스트 수행** | 개별 모듈들이 서로 정확하게 연동되고, 전체 시스템이 유기적으로 동작하는지 확인합니다. 외부 시스템 (KeyLink, External PKI)과의 연동 (`A10`, `S3`, `S2`)을 포함합니다. 인증서 발급 라이프사이클 전반에 걸쳐 데이터 흐름과 시스템 간의 상호작용을 검증합니다. `O1` (기능 통합 테스트 모듈)을 적극적으로 활용하여 효율적인 통합 테스트를 진행합니다. |
| 5 | QA (`A2`), 엔지니어 (`A3`), 시스템 관리자 (`A4`) | **고가용성 (HA) 및 재해 복구 (DR) 테스트** | DB 이중화 (`R7`), HSM 이중화 (`R8`) 설정 환경에서 데이터 동기화 (`H5`, `H6`) 및 특정 노드 장애 시 시스템 유효성 (`H14`, CRS-008)을 확인합니다. DR 리허설 테스트 (`H4`, CRS-003)를 수행하고 복구 후 기능 테스트 (`H18`, CRS-009)를 진행합니다. 실제 장애 시나리오를 모의하여 시스템의 복원력과 데이터 무결성을 검증합니다. DB 백업/복구 (`O11`, CRS-016) 절차의 유효성을 확인하고, HSM 키 관리 (`H20`, `H21`, CRS-011)에 대한 보안 정책 준수 여부를 테스트합니다. |
| 6 | QA (`A2`), 엔지니어 (`A3`) | **결함 관리 및 재테스트** | 테스트 중 발견된 모든 결함을 기록하고, 개발팀에 수정 요청합니다. 수정된 기능에 대해 재테스트를 수행하여 결함이 올바르게 해결되었는지 확인합니다. 결함 추적 시스템을 활용하여 결함의 생명주기를 관리하고, 테스트의 효율성을 높입니다. |
| 7 | QA (`A2`) | **테스트 완료 및 결과 보고** | 모든 테스트 활동이 완료된 후, 테스트 결과, 발견된 결함, 미해결 이슈 등을 종합적으로 정리하여 보고서 작성 및 최종 승인 요청합니다. `R3` (MVP 기능 테스트 통과) 및 `R4` (성능 요구사항 만족)를 공식적으로 확인하고, 제품 출시 가능 여부를 판단하는 근거 자료를 제공합니다. |
